#!/usr/bin/bash
# DECRYPTED BY TRC4@USA.COM
##################################################
###       Install VDOPanel Control Panel       ###
##################################################
#
ARGC=("$#")

if [ $ARGC -ne 1 ]; then
	echo -e "\n\033[32mOptions :\033[0m\n\nStart install with this command : ./install.bin start\nfor uninstall : ./install.bin uninstall\n"
	exit -1
fi

export choose=$1

URL_="https://vdopanel.com/dist"
cPanel_chk="/usr/local/cpanel/version"

OSCHK_FUNC()
 {
	OS_CHK=`cat /etc/os-release | grep ID= | grep -v _ID | cut -d"=" -f2 | tr -d '"'`
	OS_VER_CHK_centos=`cat /etc/os-release | grep VERSION_ID= | cut -d"=" -f2 | tr -d '"' | cut -c1-1`
	if [ -f ${cPanel_chk} ]; then
		if [[ ${OS_CHK} == "centos" || ${OS_CHK} == "cloudlinux" ]]; then
			if [ ${OS_VER_CHK_centos} = 7 ]; then
				curl -s -L ${URL_}/install-cPanel-cent7.bin > install.bin
			elif [ ${OS_VER_CHK_centos} = 8 ]; then
				curl -s -L ${URL_}/install-cPanel-cent8.bin > install.bin
			fi
		else
			echo -e "\nYour OS not supported.\n"
			exit -1
		fi
	else
		if [ ${OS_CHK} = "centos" ]; then
			if [ ${OS_VER_CHK_centos} = 7 ]; then
				curl -s -L ${URL_}/install-centos7.bin > install.bin
			elif [ ${OS_VER_CHK_centos} = 8 ]; then
				curl -s -L ${URL_}/install-centos8.bin > install.bin
			fi
		else
			echo -e "\nYour OS not supported.\n"
			exit -1
		fi
	fi
 }
if [ $choose = "start" ]; then
	# rm -rf install.bin
	OSCHK_FUNC
	chmod +x install.bin
	./install.bin start

elif [ $choose = "uninstall" ]; then
	# rm -rf install.bin
	OSCHK_FUNC
	chmod +x install.bin
	./install.bin uninstall

else
	echo -e "\nUnknown input."
	echo -e "\n\033[32mOptions :\033[0m\n\nStart install with this command : ./install.bin start\nfor uninstall : ./install.bin uninstall\n"
fi
